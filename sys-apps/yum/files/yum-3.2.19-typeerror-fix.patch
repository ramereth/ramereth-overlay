--- yum-3.2.19-orig/yum/rpmsack.py	2008-07-06 09:07:51.000000000 -0400
+++ yum-3.2.19/yum/rpmsack.py	2009-07-09 23:44:07.000000000 -0400
@@ -176,7 +176,7 @@ class RPMDBPackageSack(PackageSackBase):
         ts = self.readOnlyTS()
         result = {}
         
-        mi = ts.dbMatch('basenames', name)
+        mi = ts.dbMatch('basenames', name.encode('us-ascii'))
         for hdr in mi:
             pkg = self._makePackageObject(hdr, mi.instance())
             if not result.has_key(pkg.pkgid):
@@ -195,7 +195,7 @@ class RPMDBPackageSack(PackageSackBase):
         ts = self.readOnlyTS()
         result = {}
         tag = self.DEP_TABLE[prcotype][0]
-        mi = ts.dbMatch(tag, name)
+        mi = ts.dbMatch(tag, name.encode('us-ascii'))
         for hdr in mi:
             po = self._makePackageObject(hdr, mi.instance())
             result[po.pkgid] = po
@@ -403,6 +403,8 @@ class RPMDBPackageSack(PackageSackBase):
 
         ts = self.readOnlyTS()
         if name is not None:
+	    if type(name) == type(u''):
+	    	name = name.encode('utf8')
             mi = ts.dbMatch('name', name)
         elif arch is not None:
             mi = ts.dbMatch('arch', arch)
